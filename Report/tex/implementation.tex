\chapter{Implementation}
\label{chap:implementation}
%TODO {short intro}

\section{Domain Specific Language}
\label{sec:dsl}
%TODO {short intro}

\begin{grammar}
\label{grammar:ebnf}
      <survey> ::= `SURVEY', <text>, `:', <parts> ;
      
      <parts> ::= <part>, $\lbrace$ <part> $\rbrace$ ; 
       
      <part> ::= `PART', <text>, `:', {[} <repetitions> {]}, <questions> ;
      
      <repetitions> ::= `REPEAT:', <frequency> ;
      
      <questions> ::= <question>, $\lbrace$ <question> $\rbrace$ ;
      
      <question> ::= `QUESTION', <number>, `:', <text>, <options>, <answers> ;
      
      <options> ::= {[} <mandatory> {]}, {[} <prerequisites> {]}, <answer type> ;
      
      <mandatory> ::= `MANDATORY:', <bool> ;
      
      <prerequisites> ::= `PREREQUISITES:', ( $\lbrace$ <prerequisite> $\rbrace$ | `None' ) ;
      
      <answer type> ::= `ANSWER TYPE:', <choice> | <free> ;
      
      <choice> ::= <multiplicity>, {[} `/', <type> {]} ;
      
      <free> ::= `Free', {[} `/', <sensor> {]} ;
      
      <prerequisite> ::= `Q', <number>, `->', ( <answer> | <expression> ) ;
      
      <answers> ::= `ANSWERS:', <answer>, `/', <answer>, $\lbrace$ `/', <answer> $\rbrace$ ;
      
      <answer> ::= <number>, <text> ;
         
      <multiplicity> ::= `Single' | ( `Multiple', {[} `/', <limit> {]} ) ;
      
      <frequency> ::= `Daily' | `Weekly' | `Bi-Weekly' | `Monthly' | `Yearly' | <other> ;
      
      <limit> ::= ( <number>, `..', <number> ) | `No limit' ;
      
      <sensor> ::= ( `Temperature' | `GPS' | <other> ), `sensor' ;
      
      <bool> ::= `Yes' | `No' ;
      
      <type> ::= `Integer' | `Float' | `Boolean' | `String' | `Date' | <other> ;
      
      <expression> ::= ?logic expression? ;
      
      <text> ::= ?unicode literal? ;
      
      <number> ::= {[} `-' {]}, ?numeric literal? ;
      
      <other> ::= ?future addition? ;
\end{grammar}

\begin{verbatim}
DSL Example (as being entered when first creating a survey)

SURVEY Patient examination:

 PART Personal information:
  REPEAT: Once
   QUESTION 1: What is your gender?
    MANDATORY: Yes
    ANSWER TYPE: Single 
    ANSWERS: Male / Female / Other
      
   QUESTION 2: What year were you born in?
    MANDATORY: Yes
    ANSWER TYPE: Free

   QUESTION 3: What country do you come from?
       MANDATORY: Yes
    ANSWER TYPE: Free
      
 PART Comfort:
  REPEAT: Daily
   QUESTION 1: How are you feeling today?
   MANDATORY: Yes
   ANSWER TYPE: Single / Integer
   ANSWERS: 1..10
   
  QUESTION 2: What is the reason of your discomfort?
   MANDATORY: Yes
   PREREQUISITES: Q1 -> <5
   ANSWER TYPE: Free
 
  QUESTION 3: How would you describe your heat comfort?
   MANDATORY: No
   ANSWER TYPE: Single
   ANSWERS: Freezing / Cold / Acceptable / Warm / Hot
 
  QUESTION 4: What is the ambient temperature?
   MANDATORY: No
   ANSWER TYPE: Free / Temperature sensor
      
 PART Allergies:  
  REPEAT: Monthly
   QUESTION 1: Did you experience any allergic reactions recently?
    MANDATORY: Yes
    ANSWER TYPE: Single / Boolean
    ANSWERS: Yes / No
 
   QUESTION 2: Which of the following did cause an allergic reaction for you?
    MANDATORY: Yes
    PREREQUISITES: Q1 -> Yes
    ANSWER TYPE: Multiple / No limit
    ANSWERS: Nuts / Milk / Egg / Wheat / Soy / Fish / Other
 
   QUESTION 3: Please enter the other food(s) which caused an allergic reaction for you.
    MANDATORY: Yes
    PREREQUISITES: Q2 -> Other
    ANSWER TYPE: Free
\end{verbatim}

\section{Smartphone App}
\label{sec:app}
%TODO {remember to mention cross platform/Xamarin}